"use strict";(self.webpackChunkEcommerce2=self.webpackChunkEcommerce2||[]).push([[838],{1838:(v,i,m)=>{m.r(i),m.d(i,{ForgetPassComponent:()=>T});var l=m(6814),r=m(95),e=m(4769),_=m(304),u=m(1120);function f(o,a){1&o&&(e.TgZ(0,"p",11),e._uU(1," email is required "),e.qZA())}function g(o,a){1&o&&(e.TgZ(0,"p",11),e._uU(1," invalid email "),e.qZA())}function c(o,a){if(1&o&&(e.TgZ(0,"div",9),e.YNc(1,f,2,0,"p",10),e.YNc(2,g,2,0,"p",10),e.qZA()),2&o){const s=e.oxw(2);let t,n;e.xp6(1),e.Q6J("ngIf",null==(t=s.forgetPassForm.get("email"))?null:t.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(n=s.forgetPassForm.get("email"))?null:n.getError("email"))}}function p(o,a){if(1&o){const s=e.EpF();e.TgZ(0,"form",3),e.NdJ("ngSubmit",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.forgetPass())}),e.TgZ(1,"div",4)(2,"label",5),e._uU(3,"email:"),e.qZA(),e._UZ(4,"input",6),e.YNc(5,c,3,2,"div",7),e.qZA(),e.TgZ(6,"button",8),e._uU(7,"Forget Password"),e.qZA()()}if(2&o){const s=e.oxw();let t;e.Q6J("formGroup",s.forgetPassForm),e.xp6(5),e.Q6J("ngIf",(null==(t=s.forgetPassForm.get("email"))?null:t.errors)&&(null==(t=s.forgetPassForm.get("email"))?null:t.touched))}}function d(o,a){1&o&&(e.TgZ(0,"p",11),e._uU(1," Reset Code is required "),e.qZA())}function P(o,a){if(1&o&&(e.TgZ(0,"div",9),e.YNc(1,d,2,0,"p",10),e.qZA()),2&o){const s=e.oxw(2);let t;e.xp6(1),e.Q6J("ngIf",null==(t=s.resetPassForm.get("resetCode"))?null:t.getError("required"))}}function w(o,a){if(1&o){const s=e.EpF();e.TgZ(0,"form",3),e.NdJ("ngSubmit",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.verifyCode())}),e.TgZ(1,"div",4)(2,"label",12),e._uU(3,"Reset Code:"),e.qZA(),e._UZ(4,"input",13),e.YNc(5,P,2,1,"div",7),e.qZA(),e.TgZ(6,"button",8),e._uU(7,"Reset Code"),e.qZA()()}if(2&o){const s=e.oxw();let t;e.Q6J("formGroup",s.resetPassForm),e.xp6(5),e.Q6J("ngIf",(null==(t=s.resetPassForm.get("resetCode"))?null:t.errors)&&(null==(t=s.resetPassForm.get("resetCode"))?null:t.touched))}}function h(o,a){1&o&&(e.TgZ(0,"p",11),e._uU(1," newPassword is required "),e.qZA())}function x(o,a){1&o&&(e.TgZ(0,"p",11),e._uU(1," must be at least 6 characters and start with capital letter "),e.qZA())}function F(o,a){if(1&o&&(e.TgZ(0,"div",9),e.YNc(1,h,2,0,"p",10),e.YNc(2,x,2,0,"p",10),e.qZA()),2&o){const s=e.oxw(2);let t,n;e.xp6(1),e.Q6J("ngIf",null==(t=s.newPassForm.get("newPassword"))?null:t.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(n=s.newPassForm.get("newPassword"))?null:n.getError("pattern"))}}function C(o,a){if(1&o){const s=e.EpF();e.TgZ(0,"form",3),e.NdJ("ngSubmit",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.resetDone())}),e.TgZ(1,"div",4)(2,"label",14),e._uU(3,"Reset Password:"),e.qZA(),e._UZ(4,"input",15),e.YNc(5,F,3,2,"div",7),e.qZA(),e.TgZ(6,"button",8),e._uU(7,"Reset Password"),e.qZA()()}if(2&o){const s=e.oxw();let t;e.Q6J("formGroup",s.newPassForm),e.xp6(5),e.Q6J("ngIf",(null==(t=s.newPassForm.get("newPassword"))?null:t.errors)&&(null==(t=s.newPassForm.get("newPassword"))?null:t.touched))}}function Z(o,a){if(1&o&&(e.TgZ(0,"p",16),e._uU(1),e.qZA()),2&o){const s=e.oxw();e.xp6(1),e.Oqu(s.messege)}}let T=(()=>{class o{constructor(s,t){this._authS=s,this._router=t,this.form1=!0,this.form2=!1,this.form3=!1,this.email="",this.messege="",this.forgetPassForm=new r.cw({email:new r.NI("",[r.kI.required,r.kI.email])}),this.resetPassForm=new r.cw({resetCode:new r.NI("",[r.kI.required])}),this.newPassForm=new r.cw({newPassword:new r.NI("",[r.kI.required,r.kI.pattern(/^[a-zA-Z0-9_@]{6,}$/)])})}forgetPass(){const s=this.forgetPassForm.value;this.email=s.email,this._authS.forgetPassword(s).subscribe({next:t=>{"success"===t.statusMsg&&(this.messege=t.message,this.form1=!1,this.form2=!0)},error:t=>{"fail"===t.error.statusMsg&&(console.log(t),this.messege=t.error.message)}})}verifyCode(){this._authS.verifyCode(this.resetPassForm.value).subscribe({next:t=>{"Success"===t.status&&(console.log(t),this.messege=t.status,this.form2=!1,this.form3=!0)},error:t=>{"fail"===t.error.statusMsg&&(console.log(t),this.messege=t.error.message)}})}resetDone(){const s=this.newPassForm.value;s.email=this.email,this._authS.newPasswordReset(s).subscribe({next:t=>{localStorage.setItem("token",t.token),this._router.navigate(["/home"])},error:t=>{"fail"===t.error.statusMsg&&(this.messege=t.error.message)}})}static#e=this.\u0275fac=function(t){return new(t||o)(e.Y36(_.e),e.Y36(u.F0))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-forget-pass"]],standalone:!0,features:[e.jDz],decls:5,vars:4,consts:[[1,"bg-main-light","my-4","p-4","rounded-3","shadow","w-75","mx-auto"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","alert alert-info p-1 my-3",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-item"],["for","email",1,"mb-1"],["type","email","name","email","id","email","formControlName","email","placeholder","email...",1,"form-control"],["class","alert alert-danger mt-1 p-1",4,"ngIf"],[1,"main-btn","w-100","mt-3"],[1,"alert","alert-danger","mt-1","p-1"],["class","mb-0",4,"ngIf"],[1,"mb-0"],["for","resetPass",1,"mb-1"],["type","password","name","resetPass","id","resetPass","formControlName","resetCode","placeholder","Your Reset Code...",1,"form-control"],["for","newPass",1,"mb-1"],["type","password","name","newPass","id","newPass","formControlName","newPassword","placeholder","Your New Password...",1,"form-control"],[1,"alert","alert-info","p-1","my-3"]],template:function(t,n){1&t&&(e.TgZ(0,"section",0),e.YNc(1,p,8,2,"form",1),e.YNc(2,w,8,2,"form",1),e.YNc(3,C,8,2,"form",1),e.YNc(4,Z,2,1,"p",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.form1),e.xp6(1),e.Q6J("ngIf",n.form2),e.xp6(1),e.Q6J("ngIf",n.form3),e.xp6(1),e.Q6J("ngIf",n.messege))},dependencies:[l.ez,l.O5,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]})}return o})()}}]);