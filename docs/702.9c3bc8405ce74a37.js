"use strict";(self.webpackChunkEcommerce2=self.webpackChunkEcommerce2||[]).push([[702],{3702:(C,h,i)=>{i.r(h),i.d(h,{WishlistComponent:()=>v});var _=i(6814),u=i(3461),t=i(4769),m=i(9196),c=i(6286),d=i(2425);function n(o,p){if(1&o){const s=t.EpF();t.TgZ(0,"div",5)(1,"div",6),t._UZ(2,"img",7),t.qZA(),t.TgZ(3,"div",8)(4,"div")(5,"p",9),t._uU(6),t.ALo(7,"seeMore"),t.qZA(),t.TgZ(8,"p",10),t._uU(9),t.qZA(),t.TgZ(10,"span",11),t.NdJ("click",function(){const a=t.CHM(s).$implicit,g=t.oxw(2);return t.KtG(g.removefromWishlist(a._id))}),t._UZ(11,"i",12),t._uU(12," Remove"),t.qZA()(),t.TgZ(13,"div")(14,"button",13,14),t.NdJ("click",function(){const a=t.CHM(s).$implicit,g=t.MAs(15),E=t.oxw(2);return t.KtG(E.addProductToCart(a._id,g))}),t._uU(16,"Add To Cart"),t.qZA()()()()}if(2&o){const s=p.$implicit;t.xp6(2),t.Q6J("src",null==s?null:s.imageCover,t.LSH)("alt",s.title),t.xp6(4),t.Oqu(t.xi3(7,4,s.title,4)),t.xp6(3),t.hij("Price: ",s.price,"")}}function l(o,p){if(1&o&&(t.TgZ(0,"section",2)(1,"h2",3),t._uU(2,"Wishlist Cart"),t.qZA(),t.YNc(3,n,17,7,"div",4),t.qZA()),2&o){const s=t.oxw();t.xp6(3),t.Q6J("ngForOf",s.wishlistArr)}}function f(o,p){1&o&&(t.TgZ(0,"h2",15),t._uU(1,"Your Wishlist Is Empty"),t.qZA())}let v=(()=>{class o{constructor(s,e,r,a){this._wishlistS=s,this._renderer2=e,this._cartS=r,this._toastr=a,this.wishlistArr=[],this.wishlistData=[]}ngOnInit(){this._wishlistS.getWishlist().subscribe({next:s=>{this.wishlistArr=s.data},error:s=>{console.log(s)}})}removefromWishlist(s){this._wishlistS.removeFromWishlist(s).subscribe({next:e=>{if("success"===e.status){this._toastr.success(e.message),this.wishlistData=e.data,this._wishlistS.numOfFavs.next(this.wishlistData.length);const r=this.wishlistArr.filter(a=>this.wishlistData.includes(a._id));this.wishlistArr=r}},error:e=>{"fail"===e.error.statusMsg&&(console.log(e),this._toastr.success(e.error.message))}})}addProductToCart(s,e){this._renderer2.setAttribute(e,"disabled","true"),this._cartS.addToCart(s).subscribe({next:r=>{"success"===r.status&&(this._renderer2.removeAttribute(e,"disabled"),this._toastr.success(r.message),this._cartS.numOfItems.next(r.numOfCartItems))},error:r=>{this._renderer2.removeAttribute(e,"disabled"),console.log(r)}})}static#t=this.\u0275fac=function(e){return new(e||o)(t.Y36(m.M),t.Y36(t.Qsj),t.Y36(c.N),t.Y36(d._W))};static#s=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-wishlist"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","my-5 p-3 bg-main-light shadow rounded-3 w-75 mx-auto",4,"ngIf","ngIfElse"],["name",""],[1,"my-5","p-3","bg-main-light","shadow","rounded-3","w-75","mx-auto"],[1,"text-center","fw-light"],["class","row border-bottom border-2 py-3",4,"ngFor","ngForOf"],[1,"row","border-bottom","border-2","py-3"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","justify-content-between","align-items-center"],[1,"mb-1","mt-sm-2","mt-md-0"],[1,"mb-1"],[1,"text-danger","cursor-pointer",3,"click"],[1,"fa-solid","fa-trash"],[1,"btn","btn-outline-success","delete-btn","d-block","ms-md-auto","mx-auto","mx-md-0","my-3",3,"click"],["btnAdd",""],[1,"text-center","fw-light","my-3"]],template:function(e,r){if(1&e&&(t.YNc(0,l,4,1,"section",0),t.YNc(1,f,2,0,"ng-template",null,1,t.W1O)),2&e){const a=t.MAs(2);t.Q6J("ngIf",r.wishlistArr)("ngIfElse",a)}},dependencies:[_.ez,_.sg,_.O5,u.F]})}return o})()},3461:(C,h,i)=>{i.d(h,{F:()=>u});var _=i(4769);let u=(()=>{class t{transform(c,d=5){return c.split(" ").slice(0,d).join(" ")}static#t=this.\u0275fac=function(d){return new(d||t)};static#s=this.\u0275pipe=_.Yjl({name:"seeMore",type:t,pure:!0,standalone:!0})}return t})()},6286:(C,h,i)=>{i.d(h,{N:()=>m});var _=i(5619),u=i(4769),t=i(9862);let m=(()=>{class c{constructor(n){this._httpClient=n,this.numOfItems=new _.X(0)}addToCart(n){return this._httpClient.post("/api/v1/cart",{productId:n})}getUserCart(){return this._httpClient.get("/api/v1/cart")}removeProduct(n){return this._httpClient.delete(`/api/v1/cart/${n}`)}updateCartQuantity(n,l){return this._httpClient.put(`/api/v1/cart/${n}`,{count:l})}clearCart(){return this._httpClient.delete("/api/v1/cart")}checkOut(n,l){return this._httpClient.post(`/api/v1/orders/checkout-session/${n}?url=http://localhost:4200`,{shippingAddress:l})}getUserOrders(){return this._httpClient.get("")}getAllusers(){return this._httpClient.get("/api/v1/users")}static#t=this.\u0275fac=function(l){return new(l||c)(u.LFG(t.eN))};static#s=this.\u0275prov=u.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);